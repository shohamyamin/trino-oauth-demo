# ============================================
# OAuth2 Configuration - Two Client Setup
# ============================================
# This setup uses TWO separate OAuth clients for better security:
# 1. PUBLIC CLIENT (query-app) - Used by frontend app (no secret, uses PKCE)
# 2. CONFIDENTIAL CLIENT (trino) - Used by Trino server (has secret for token validation)

# PUBLIC CLIENT - Frontend Application (React)
# This client uses PKCE and doesn't require a client secret
OAUTH2_PUBLIC_CLIENT_ID=query-app

# CONFIDENTIAL CLIENT - Trino Server
OAUTH2_TRINO_CLIENT_ID=trino
OAUTH2_TRINO_CLIENT_SECRET=cUVZC0HsBaTicrDKmgv3YXAtlf8LYOmy

# OAuth2 Endpoints
# IMPORTANT: Issuer URL must be accessible from both:
# 1. Docker containers (for OIDC discovery) - via host.docker.internal
# 2. Browser (for user redirects) - via localhost
# We use host.docker.internal for issuer (containers fetch metadata from here)
# But override auth-url to use localhost (so browser redirects work)
OAUTH2_ISSUER_URL=http://localhost:8080/realms/trino-demo-oauth
OAUTH2_JWKS_URL=http://localhost:8080/realms/trino-demo-oauth/protocol/openid-connect/certs
OAUTH2_AUTHORIZATION_URL=http://localhost:8080/realms/trino-demo-oauth/protocol/openid-connect/auth
OAUTH2_TOKEN_URL=http://localhost:8080/realms/trino-demo-oauth/protocol/openid-connect/token
OAUTH2_USERINFO_URL=http://localhost:8080/realms/trino-demo-oauth/protocol/openid-connect/userinfo
OAUTH2_PRINCIPAL_FIELD=preferred_username

# Admin Authorization (must match the email from your OAuth provider token)
TRINO_ADMIN_USERNAME=shomo

# ============================================
# Frontend Configuration (Vite requires VITE_ prefix)
# ============================================
VITE_BACKEND_URL=http://localhost:3001

# Frontend OAuth Configuration (for browser)
# Use localhost since browser runs on host machine
VITE_OAUTH_AUTHORIZATION_URL=http://localhost:8080/realms/trino-demo-oauth/protocol/openid-connect/auth
VITE_OAUTH_CLIENT_ID=query-app
VITE_OAUTH_REDIRECT_URI=http://localhost:5173/callback
VITE_OAUTH_SCOPE=openid profile email

# ============================================
# Trino Configuration
# ============================================
TRINO_HOST=localhost
TRINO_PORT=8443
TRINO_CATALOG=tpch
TRINO_SCHEMA=sf1

# Internal Communication Secret (change in production!)
# Must be at least 256 bits (32 characters)
TRINO_INTERNAL_SECRET=trino-internal-secret-change-in-production-use-random-string

# ============================================
# Backend Configuration
# ============================================
FRONTEND_ORIGIN=http://localhost:5173
