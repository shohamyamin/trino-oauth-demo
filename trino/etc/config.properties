coordinator=true
node-scheduler.include-coordinator=true
http-server.https.enabled=true
http-server.https.port=8443
http-server.http.port=8081
http-server.https.keystore.path=/etc/trino/trino.jks
http-server.https.keystore.key=changeit
discovery.uri=http://localhost:8081

# --- Web UI Configuration ---
# Enable Trino Web UI with OAuth2 authentication
web-ui.enabled=true
web-ui.authentication.type=oauth2
# --- Security Configuration ---
# Trino uses the CONFIDENTIAL client for OAuth2 authentication
# This client has a secret and is used to validate tokens from the public frontend client
http-server.authentication.type=oauth2
http-server.authentication.oauth2.issuer=${ENV:OAUTH2_ISSUER_URL}
http-server.authentication.oauth2.jwks-url=${ENV:OAUTH2_JWKS_URL}
http-server.authentication.oauth2.client-id=${ENV:OAUTH2_TRINO_CLIENT_ID}
http-server.authentication.oauth2.client-secret=${ENV:OAUTH2_TRINO_CLIENT_SECRET}
http-server.authentication.oauth2.principal-field=${ENV:OAUTH2_PRINCIPAL_FIELD}
# Allow tokens issued to the public client and the trino confidential client (audience validation)
http-server.authentication.oauth2.additional-audiences=${ENV:OAUTH2_PUBLIC_CLIENT_ID},${ENV:OAUTH2_TRINO_CLIENT_ID}

# Accept tokens with these audiences - includes the public client ID
http-server.authentication.oauth2.scopes=openid,email,profile
http-server.authentication.oauth2.auth-url=${ENV:OAUTH2_AUTHORIZATION_URL}
http-server.authentication.oauth2.token-url=${ENV:OAUTH2_TOKEN_URL}
http-server.authentication.oauth2.userinfo-url=${ENV:OAUTH2_USERINFO_URL}
http-server.authentication.oauth2.user-mapping.pattern=(.*)
# In Keycloak, the userinfo endpoint is not needed if using JWT tokens(infact when using it with Keycloak it causes issues)
http-server.authentication.oauth2.oidc.use-userinfo-endpoint=false
# Internal communication shared secret (required when authentication is enabled)
internal-communication.shared-secret=${ENV:TRINO_INTERNAL_SECRET}

# --- Access Control Configuration ---
access-control.config-files=/etc/trino/access-control.properties
